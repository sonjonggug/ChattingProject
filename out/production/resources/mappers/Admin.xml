<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.toy.mapper.AdminMapper">

    <update id="updateUser" parameterType="com.example.toy.jpa.entity.Login_User">
        UPDATE login_user
        SET user_ame = '${userName}',
            userid    = '${userid }',
            user_auth = '${userAuth }',
            user_sex  = '${userSex }'
        WHERE user_num = ${userNum};

    </update>

    <select id="chattLog" parameterType="String" resultType="HashMap">
        select a.talk      as user_talk
             , a.send_date as user_send_date
             , a.userid
             , b.result    as bot_answer
             , b.send_date as bot_send_date
        FROM user_talk_log a
                 INNER JOIN talk_bot_log b
                            ON a.userNum = b.userNum
        where a.userid = '${userid}'
        order by a.send_date asc;
    </select>

    <delete id="deleteUser" parameterType="com.example.toy.jpa.entity.Login_User">
        delete
        from login_user
        where user_num = ${userNum};

    </delete>
</mapper>